"use strict";define(["app"],function(app){var injectParams=["$rootScope","$timeout","AppConfig","$injector","$q"],httpResponseFactory=function($rootScope,$timeout,AppConfig,$injector,$q){var retries=0,waitBetweenErrors=1e3,maxRetries=5,onResponseError=function(httpConfig){var $http=$injector.get("$http");return $timeout(function(){return $http(httpConfig)},waitBetweenErrors)},responseError=function(response){if(response.config.url.indexOf(AppConfig.templateMobilePath)!=-1)return $q.reject(response);if(200!=response.status&&retries<maxRetries)return retries++,onResponseError(response.config);if(200!=response.status&&retries>=maxRetries){switch(retries=0,response.status){case 0:$rootScope.$broadcast("OnInvalidAccess",response.error,response.status);break;case 401:$rootScope.$broadcast("On401Access",response.error,response.status);break;default:$rootScope.$broadcast("OnInvalidAccess",response.error,response.status)}return $q.reject(response)}return retries=0,$q.reject(response)};return{responseError:responseError}};httpResponseFactory.$inject=injectParams,app.factory("HttpErrorInterceptor",httpResponseFactory).config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push("HttpErrorInterceptor")}])});